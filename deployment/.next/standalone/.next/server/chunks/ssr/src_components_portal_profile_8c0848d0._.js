module.exports=[8759,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(35112),e=a.i(99570),f=a.i(66718),g=a.i(70430),h=a.i(80701),i=a.i(48468),j=a.i(24348),k=a.i(21007);function l({organizations:a,initialState:d,action:e,initialValues:l,affiliationOptions:p,livedExperienceOptions:q}){let[r,s]=(0,c.useActionState)(e,d),t=l.organizationId??(l.requestedOrganizationName?k.NEW_ORGANIZATION_VALUE:k.NO_ORGANIZATION_VALUE),u=new Set(p.map(a=>a.value)),[v,w]=(0,c.useState)(t),x=u.has(l.affiliationType)?l.affiliationType:p[0]?.value??"community_member",[y,z]=(0,c.useState)(x),[A,B]=(0,c.useState)(l.homelessnessExperience),[C,D]=(0,c.useState)(l.substanceUseExperience);(0,c.useEffect)(()=>{"community_member"===y&&(0,c.startTransition)(()=>{w(k.NO_ORGANIZATION_VALUE)})},[y]);let E="community_member"!==y,F=v===k.NEW_ORGANIZATION_VALUE,G=new Map(a.map(a=>[a.id,a.name])),H="community_member"===y,I="pending"===l.affiliationStatus?function({affiliationType:a,organizationId:b,requestedOrganizationName:c,organizationMap:d}){if("agency_partner"===a){let a=c?`"${c}"`:b?d.get(b)??"your organization":"your organization";return`Pending moderator review for ${a}.`}return null}({affiliationType:x,organizationId:l.organizationId,requestedOrganizationName:l.requestedOrganizationName,organizationMap:G}):null;return(0,b.jsxs)("form",{action:s,className:"space-y-space-lg rounded-3xl border border-outline/40 bg-surface p-space-lg shadow-level-1",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-space-xs",children:[(0,b.jsx)("h2",{className:"text-title-lg font-medium text-on-surface",children:"Profile details"}),(0,b.jsx)("p",{className:"text-body-sm text-muted-foreground",children:"Update how neighbours see you in STEVI and confirm the IHARC role you collaborate with."})]}),I?(0,b.jsxs)(j.Alert,{className:"border-primary bg-primary-container text-body-sm text-on-primary-container",children:[(0,b.jsx)(j.AlertTitle,{children:"Verification in progress"}),(0,b.jsx)(j.AlertDescription,{children:I})]}):null,"success"===r.status&&r.message?(0,b.jsx)(j.Alert,{className:"border-primary bg-primary-container text-body-sm text-on-primary-container",children:(0,b.jsx)(j.AlertDescription,{children:r.message})}):null,r.error?(0,b.jsxs)(j.Alert,{variant:"destructive",className:"text-body-sm",children:[(0,b.jsx)(j.AlertTitle,{children:"We could not save your updates"}),(0,b.jsx)(j.AlertDescription,{children:r.error})]}):null,(0,b.jsxs)("div",{className:"grid gap-space-xs",children:[(0,b.jsx)(g.Label,{htmlFor:"display_name",children:"Display name"}),(0,b.jsx)(f.Input,{id:"display_name",name:"display_name",required:!0,defaultValue:l.displayName,maxLength:80,placeholder:"How should neighbours refer to you?"})]}),(0,b.jsxs)("div",{className:"grid gap-space-sm",children:[(0,b.jsx)(g.Label,{children:"How do you collaborate with IHARC?"}),(0,b.jsx)(i.RadioGroup,{name:"affiliation_type",value:y,onValueChange:a=>z(a),className:"grid gap-space-sm md:grid-cols-2",children:p.map(a=>(0,b.jsx)(o,{id:`profile-affiliation-${a.value}`,value:a.value,title:a.label,description:`Collaborate as ${a.label}.`},a.value))})]}),E?(0,b.jsxs)("div",{className:"space-y-space-sm rounded-xl border border-outline/20 p-space-md",children:[(0,b.jsxs)("div",{className:"grid gap-space-xs",children:[(0,b.jsx)(g.Label,{htmlFor:"agency_organization_id",children:"Partner organization"}),(0,b.jsxs)(h.Select,{name:"agency_organization_id",value:v,onValueChange:w,children:[(0,b.jsx)(h.SelectTrigger,{id:"agency_organization_id",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select your organization"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:k.NO_ORGANIZATION_VALUE,disabled:!0,children:"Select your organization"}),a.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id,children:a.name},a.id)),(0,b.jsx)(h.SelectItem,{value:k.NEW_ORGANIZATION_VALUE,children:"Request a new organization"})]})]})]}),F?(0,b.jsxs)("div",{className:"grid gap-space-xs",children:[(0,b.jsx)(g.Label,{htmlFor:"new_organization_name",children:"Organization name"}),(0,b.jsx)(f.Input,{id:"new_organization_name",name:"new_organization_name",placeholder:"Northumberland Outreach Network",minLength:3,required:!0,defaultValue:l.requestedOrganizationName??""})]}):(0,b.jsx)("input",{type:"hidden",name:"new_organization_name",value:""}),(0,b.jsxs)("div",{className:"grid gap-space-xs",children:[(0,b.jsx)(g.Label,{htmlFor:"position_title",children:"Role or position"}),(0,b.jsx)(f.Input,{id:"position_title",name:"position_title",placeholder:"Outreach worker, volunteer coordinator, peer navigator…",required:!0,defaultValue:l.positionTitle??""}),(0,b.jsx)("p",{className:"text-label-sm text-muted-foreground",children:"We share this internally so teams know how you collaborate with neighbours and partners."})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("input",{type:"hidden",name:"agency_organization_id",value:k.NO_ORGANIZATION_VALUE}),(0,b.jsx)("input",{type:"hidden",name:"new_organization_name",value:""})]}),H?(0,b.jsx)("input",{type:"hidden",name:"position_title",value:k.PUBLIC_MEMBER_ROLE_LABEL}):null,(0,b.jsxs)("div",{className:"grid gap-space-xs",children:[(0,b.jsx)(g.Label,{htmlFor:"homelessness_experience",children:"Homelessness lived experience badge"}),(0,b.jsxs)(h.Select,{name:"homelessness_experience",value:A,onValueChange:a=>B(a),children:[(0,b.jsx)(h.SelectTrigger,{id:"homelessness_experience",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select lived experience"})}),(0,b.jsx)(h.SelectContent,{children:q.map(a=>(0,b.jsx)(h.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsx)(n,{selectedValue:A,options:q})]}),(0,b.jsxs)("div",{className:"grid gap-space-xs",children:[(0,b.jsx)(g.Label,{htmlFor:"substance_use_experience",children:"Substance use lived experience badge"}),(0,b.jsxs)(h.Select,{name:"substance_use_experience",value:C,onValueChange:a=>D(a),children:[(0,b.jsx)(h.SelectTrigger,{id:"substance_use_experience",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select lived experience"})}),(0,b.jsx)(h.SelectContent,{children:q.map(a=>(0,b.jsx)(h.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsx)(n,{selectedValue:C,options:q})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)(m,{})})]})}function m(){let{pending:a}=(0,d.useFormStatus)();return(0,b.jsx)(e.Button,{type:"submit",disabled:a,children:a?"Saving…":"Save changes"})}function n({selectedValue:a,options:c}){let d=c.find(b=>b.value===a);return d?(0,b.jsx)("p",{className:"text-label-sm text-muted-foreground",children:d.description}):null}function o({id:a,value:c,title:d,description:e}){return(0,b.jsxs)("label",{htmlFor:a,className:"flex cursor-pointer items-start gap-space-sm rounded-xl border border-outline/40 bg-surface-container p-space-md text-body-sm font-medium text-on-surface shadow-level-1 transition state-layer-color-primary hover:border-primary hover:state-layer-hover focus-within:outline-none focus-within:ring-2 focus-within:ring-primary focus-within:state-layer-focus",children:[(0,b.jsx)(i.RadioGroupItem,{id:a,value:c,className:"mt-1"}),(0,b.jsxs)("span",{children:[d,(0,b.jsx)("span",{className:"mt-space-2xs block text-label-sm font-normal text-muted-foreground",children:e})]})]})}a.s(["ProfileDetailsForm",()=>l])},28565,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(35112),e=a.i(99570),f=a.i(66718),g=a.i(70430),h=a.i(24348),i=a.i(91115);function j({initialEmail:a,initialPhone:d,emailAction:j,phoneAction:m,initialEmailState:n,initialPhoneState:o}){let[p,q]=(0,c.useActionState)(j,n),[r,s]=(0,c.useActionState)(m,o),[t,u]=(0,c.useState)(d??""),v="otp_sent"===r.status;(0,c.useEffect)(()=>{if("success"===r.status&&r.phone){let a=r.phone;(0,c.startTransition)(()=>{u(a)})}"idle"!==r.status||v||void 0!==r.phone||!d||t||(0,c.startTransition)(()=>{u(d)})},[r,v,d,t]);let w=(0,c.useMemo)(()=>v?r.maskedPhone??(r.phone?(0,i.maskPhoneNumber)(r.phone):null):t?(0,i.maskPhoneNumber)(t)||t:null,[v,r.maskedPhone,r.phone,t]);return(0,b.jsxs)("section",{className:"grid gap-space-lg rounded-3xl border border-outline/20 bg-surface p-space-lg shadow-level-1",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-space-xs",children:[(0,b.jsx)("h2",{className:"text-title-lg font-medium text-on-surface",children:"Contact preferences"}),(0,b.jsx)("p",{className:"text-body-sm text-on-surface/70",children:"Let outreach staff know the best way to reach you about appointments, documents, and plan updates."})]}),(0,b.jsxs)("form",{action:q,className:"grid gap-space-sm",children:[(0,b.jsxs)("div",{className:"grid gap-space-xs",children:[(0,b.jsx)(g.Label,{htmlFor:"profile-email",children:"Email"}),(0,b.jsx)(f.Input,{id:"profile-email",name:"email",type:"email",autoComplete:"email",defaultValue:a??"",placeholder:"you@example.ca"}),(0,b.jsx)("p",{className:"text-label-sm text-muted-foreground",children:"We send verification, document links, and password reset emails here. Leave blank if you prefer phone updates only."})]}),(0,b.jsxs)("div",{className:"flex flex-col items-start gap-space-xs sm:flex-row sm:items-center sm:gap-space-sm",children:[(0,b.jsx)(k,{}),p.message?(0,b.jsx)("span",{className:`text-body-sm ${"success"===p.status?"text-primary":"text-muted-foreground"}`,role:"success"===p.status?"status":void 0,children:p.message}):null]}),p.error?(0,b.jsxs)(h.Alert,{variant:"destructive",className:"text-body-sm",children:[(0,b.jsx)(h.AlertTitle,{children:"We could not update your email"}),(0,b.jsx)(h.AlertDescription,{children:p.error})]}):null]}),(0,b.jsxs)("form",{action:s,className:"grid gap-space-sm",children:[(0,b.jsx)("input",{type:"hidden",name:"stage",value:v?"verify":"request"}),v?(0,b.jsx)("input",{type:"hidden",name:"otp_phone",value:r.phone??t}):null,(0,b.jsxs)("div",{className:"grid gap-space-xs",children:[(0,b.jsx)(g.Label,{htmlFor:"profile-phone",children:"Phone number"}),(0,b.jsx)(f.Input,{id:"profile-phone",name:"phone",type:"tel",autoComplete:"tel",inputMode:"tel",value:t,onChange:a=>u(a.target.value),placeholder:"+16475551234",disabled:v}),(0,b.jsx)("p",{className:"text-label-sm text-muted-foreground",children:"Include your country code so we can text verification codes or urgent appointment updates."})]}),v?(0,b.jsxs)("div",{className:"grid gap-space-xs",children:[(0,b.jsx)(g.Label,{htmlFor:"profile-phone-otp",children:"Verification code"}),(0,b.jsx)(f.Input,{id:"profile-phone-otp",name:"otp_code",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,placeholder:"123456",required:!0}),(0,b.jsxs)("p",{className:"text-label-sm text-muted-foreground",children:["We texted a 6-digit code to ",w??"your phone number",". Codes expire after 5 minutes."]})]}):null,(0,b.jsxs)("div",{className:"flex flex-col items-start gap-space-xs sm:flex-row sm:items-center sm:gap-space-sm",children:[(0,b.jsx)(l,{otpPending:v}),v?(0,b.jsx)(e.Button,{type:"submit",name:"intent",value:"cancel",variant:"outline",className:"sm:w-auto",formNoValidate:!0,children:"Use a different number"}):null,!v&&r.message&&"success"!==r.status?(0,b.jsx)("span",{className:"text-body-sm text-muted-foreground",children:r.message}):null]}),r.error?(0,b.jsxs)(h.Alert,{variant:"destructive",className:"text-body-sm",children:[(0,b.jsx)(h.AlertTitle,{children:"We could not update your phone number"}),(0,b.jsx)(h.AlertDescription,{children:r.error})]}):null,v&&r.message?(0,b.jsx)(h.Alert,{className:"border-primary bg-primary-container text-body-sm text-on-primary-container",children:(0,b.jsx)(h.AlertDescription,{children:r.message})}):null,"success"===r.status&&r.message?(0,b.jsx)(h.Alert,{className:"border-secondary bg-secondary-container text-on-secondary-container",children:(0,b.jsx)(h.AlertDescription,{children:r.message})}):null]})]})}function k(){let{pending:a}=(0,d.useFormStatus)();return(0,b.jsx)(e.Button,{type:"submit",disabled:a,className:"w-full justify-center sm:w-auto",children:a?"Sending...":"Send verification link"})}function l({otpPending:a}){let{pending:c}=(0,d.useFormStatus)();return(0,b.jsx)(e.Button,{type:"submit",disabled:c,className:"w-full justify-center sm:w-auto",children:c?a?"Verifying...":"Sending...":a?"Verify code":"Text me a code"})}a.s(["ProfileContactCard",()=>j])},51435,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(35112),e=a.i(99570),f=a.i(66718),g=a.i(70430),h=a.i(24348);function i({action:a,initialState:d,hasEmail:e,hasPhone:i}){let[k,l]=(0,c.useActionState)(a,d);return(0,b.jsxs)("section",{className:"grid gap-space-lg rounded-3xl border border-outline/20 bg-surface p-space-lg shadow-level-1",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-space-xs",children:[(0,b.jsx)("h2",{className:"text-title-lg font-medium text-on-surface",children:"Password"}),(0,b.jsx)("p",{className:"text-body-sm text-on-surface/70",children:e&&i?"Update the password used with your email or phone sign in.":e?"Update the password used with your email sign in.":"Update the password used with your phone sign in."})]}),(0,b.jsxs)("form",{action:l,className:"grid gap-space-sm",children:[(0,b.jsxs)("div",{className:"grid gap-space-xs",children:[(0,b.jsx)(g.Label,{htmlFor:"current_password",children:"Current password"}),(0,b.jsx)(f.Input,{id:"current_password",name:"current_password",type:"password",autoComplete:"current-password",required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-space-xs",children:[(0,b.jsx)(g.Label,{htmlFor:"new_password",children:"New password"}),(0,b.jsx)(f.Input,{id:"new_password",name:"new_password",type:"password",autoComplete:"new-password",required:!0,minLength:8})]}),(0,b.jsxs)("div",{className:"grid gap-space-xs",children:[(0,b.jsx)(g.Label,{htmlFor:"confirm_password",children:"Confirm new password"}),(0,b.jsx)(f.Input,{id:"confirm_password",name:"confirm_password",type:"password",autoComplete:"new-password",required:!0,minLength:8})]}),k.error?(0,b.jsxs)(h.Alert,{variant:"destructive",className:"text-body-sm",children:[(0,b.jsx)(h.AlertTitle,{children:"We could not update your password"}),(0,b.jsx)(h.AlertDescription,{children:k.error})]}):null,"success"===k.status&&k.message?(0,b.jsx)(h.Alert,{className:"border-secondary bg-secondary-container text-on-secondary-container",children:(0,b.jsx)(h.AlertDescription,{children:k.message})}):null,(0,b.jsx)(j,{})]})]})}function j(){let{pending:a}=(0,d.useFormStatus)();return(0,b.jsx)(e.Button,{type:"submit",disabled:a,className:"w-full justify-center sm:w-auto",children:a?"Updating...":"Update password"})}a.s(["ProfilePasswordForm",()=>i])}];

//# sourceMappingURL=src_components_portal_profile_8c0848d0._.js.map
module.exports=[49105,a=>{"use strict";var b=a.i(72131);a.i(35112);var c=a.i(70121),d=a.i(87924),e=Symbol.for("react.lazy"),f=b[" use ".trim().toString()];function g(a){var b;return null!=a&&"object"==typeof a&&"$$typeof"in a&&a.$$typeof===e&&"_payload"in a&&"object"==typeof(b=a._payload)&&null!==b&&"then"in b}var h=Symbol("radix.slottable");function i(a){return b.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===h}var j=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{var h,j;let k,l,m,n=(j=h=`Primitive.${e}`,(k=b.forwardRef((a,d)=>{let{children:e,...h}=a;if(g(e)&&"function"==typeof f&&(e=f(e._payload)),b.isValidElement(e)){var i;let a,f,g=(i=e,(f=(a=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?i.ref:(f=(a=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?i.props.ref:i.props.ref||i.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(h,e.props);return e.type!==b.Fragment&&(j.ref=d?(0,c.composeRefs)(d,g):g),b.cloneElement(e,j)}return b.Children.count(e)>1?b.Children.only(null):null})).displayName=`${j}.SlotClone`,l=k,(m=b.forwardRef((a,c)=>{let{children:e,...h}=a;g(e)&&"function"==typeof f&&(e=f(e._payload));let j=b.Children.toArray(e),k=j.find(i);if(k){let a=k.props.children,e=j.map(c=>c!==k?c:b.Children.count(a)>1?b.Children.only(null):b.isValidElement(a)?a.props.children:null);return(0,d.jsx)(l,{...h,ref:c,children:b.isValidElement(a)?b.cloneElement(a,void 0,e):null})}return(0,d.jsx)(l,{...h,ref:c,children:e})})).displayName=`${h}.Slot`,m),o=b.forwardRef((a,b)=>{let{asChild:c,...f}=a;return(0,d.jsx)(c?n:e,{...f,ref:b})});return o.displayName=`Primitive.${e}`,{...a,[e]:o}},{}),k=b.forwardRef((a,b)=>(0,d.jsx)(j.label,{...a,ref:b,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));k.displayName="Label",a.s(["Label",()=>k,"Root",()=>k],49105)},5050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20611),g=a.r(1722),h=a.r(38783)},5084,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(70121),e=Symbol.for("react.lazy"),f=c[" use ".trim().toString()];function g(a){var b;return null!=a&&"object"==typeof a&&"$$typeof"in a&&a.$$typeof===e&&"_payload"in a&&"object"==typeof(b=a._payload)&&null!==b&&"then"in b}var h=Symbol("radix.slottable");function i(a){return c.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===h}var j=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{var h,j;let k,l,m,n=(j=h=`Primitive.${e}`,(k=c.forwardRef((a,b)=>{let{children:e,...h}=a;if(g(e)&&"function"==typeof f&&(e=f(e._payload)),c.isValidElement(e)){var i;let a,f,g=(i=e,(f=(a=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?i.ref:(f=(a=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?i.props.ref:i.props.ref||i.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(h,e.props);return e.type!==c.Fragment&&(j.ref=b?(0,d.composeRefs)(b,g):g),c.cloneElement(e,j)}return c.Children.count(e)>1?c.Children.only(null):null})).displayName=`${j}.SlotClone`,l=k,(m=c.forwardRef((a,d)=>{let{children:e,...h}=a;g(e)&&"function"==typeof f&&(e=f(e._payload));let j=c.Children.toArray(e),k=j.find(i);if(k){let a=k.props.children,e=j.map(b=>b!==k?b:c.Children.count(a)>1?c.Children.only(null):c.isValidElement(a)?a.props.children:null);return(0,b.jsx)(l,{...h,ref:d,children:c.isValidElement(a)?c.cloneElement(a,void 0,e):null})}return(0,b.jsx)(l,{...h,ref:d,children:e})})).displayName=`${h}.Slot`,m),o=c.forwardRef((a,c)=>{let{asChild:d,...f}=a;return(0,b.jsx)(d?n:e,{...f,ref:c})});return o.displayName=`Primitive.${e}`,{...a,[e]:o}},{}),k="horizontal",l=["horizontal","vertical"],m=c.forwardRef((a,c)=>{var d;let{decorative:e,orientation:f=k,...g}=a,h=(d=f,l.includes(d))?f:k;return(0,b.jsx)(j.div,{"data-orientation":h,...e?{role:"none"}:{"aria-orientation":"vertical"===h?h:void 0,role:"separator"},...g,ref:c})});m.displayName="Separator";var n=a.i(68114);let o=c.forwardRef(({className:a,orientation:c="horizontal",decorative:d=!0,...e},f)=>(0,b.jsx)(m,{ref:f,decorative:d,orientation:c,className:(0,n.cn)("shrink-0 bg-border","horizontal"===c?"h-[1px] w-full":"h-full w-[1px]",a),...e}));o.displayName=m.displayName,a.s(["Separator",()=>o],5084)},51481,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(86304),f=a.i(99570);let g="stevi-admin-user-saved-searches";function h({segment:a,currentParams:h}){let j=(0,d.useRouter)(),[k,l]=(0,c.useState)(()=>[]),m=(0,c.useMemo)(()=>[{id:"pending",label:"Pending approvals",params:i({status:"pending"})},{id:"org-admins",label:"Org admins",params:i({role:"portal_org_admin"})},{id:"no-org",label:"No org linked",params:i({org:"none"})},{id:"revoked",label:"Revoked",params:i({status:"revoked"})}],[]),n=b=>{let c=b?`?${b}`:"";j.push(`/admin/users/${a}${c}`)};return(0,b.jsxs)("div",{className:"flex flex-col gap-space-2xs rounded-2xl border border-outline/15 bg-surface-container-low px-space-sm py-space-sm",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-space-sm",children:[(0,b.jsx)(e.Badge,{variant:"secondary",children:"Saved searches"}),(0,b.jsx)(f.Button,{type:"button",size:"sm",variant:"outline",onClick:()=>{let a=prompt("Name this saved search");if(!a)return;let b=[{id:`${Date.now()}`,label:a,params:h},...k].slice(0,8);l(b),localStorage.setItem(g,JSON.stringify(b))},children:"Save current filters"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-space-xs",children:[m.map(a=>(0,b.jsx)(f.Button,{size:"sm",variant:"ghost",className:"border border-outline/20",onClick:()=>n(a.params),children:a.label},a.id)),k.map(a=>(0,b.jsxs)(f.Button,{size:"sm",variant:"outline",className:"flex items-center gap-space-2xs",onClick:()=>n(a.params),children:[(0,b.jsx)("span",{children:a.label}),(0,b.jsx)(e.Badge,{variant:"secondary",className:"cursor-pointer",onClick:b=>{var c;let d;b.stopPropagation(),c=a.id,l(d=k.filter(a=>a.id!==c)),localStorage.setItem(g,JSON.stringify(d))},children:"Remove"})]},a.id))]}),(0,b.jsx)("p",{className:"text-label-sm text-muted-foreground",children:"Applies filters client-side; data still constrained by RLS."})]})}function i(a){let b=new URLSearchParams;return Object.entries(a).forEach(([a,c])=>{"none"===c?b.set(a,""):b.set(a,c)}),b.toString()}a.s(["UserSavedSearches",()=>h])},90662,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(57061),f=a.i(86304),g=a.i(99570),h=a.i(5084),i=a.i(78125),j=a.i(5050),k=(0,j.createServerReference)("40e1e9d33210be144f9fc3d75f3dc268aad536e59d",j.callServer,void 0,j.findSourceMapURL,"toggleRoleAction"),l=(0,j.createServerReference)("403ff0050b2e2d02d65bd8bee793dd4af4f3fa9288",j.callServer,void 0,j.findSourceMapURL,"updateProfileAction");function m({user:a,roleOptions:j}){let{toast:m}=(0,i.useToast)(),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useTransition)(),s=(0,c.useMemo)(()=>new Set([...a.roles.portal??[],...a.roles.iharc??[]]),[a.roles]);return(0,b.jsxs)(e.Sheet,{open:o,onOpenChange:p,children:[(0,b.jsx)(e.SheetTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"outline",size:"sm",children:"Peek"})}),(0,b.jsxs)(e.SheetContent,{side:"right",className:"w-full max-w-[520px] overflow-y-auto",children:[(0,b.jsxs)(e.SheetHeader,{className:"text-left",children:[(0,b.jsx)(e.SheetTitle,{className:"text-title-lg",children:a.displayName}),(0,b.jsx)("p",{className:"text-label-sm text-muted-foreground",children:a.email??"No email on file"})]}),(0,b.jsxs)("div",{className:"mt-space-md space-y-space-md text-body-sm",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-space-2xs",children:[(0,b.jsx)(f.Badge,{variant:"secondary",className:"capitalize",children:a.affiliationType.replace("_"," ")}),(0,b.jsx)(f.Badge,{variant:"approved"===a.affiliationStatus?"default":"pending"===a.affiliationStatus?"outline":"secondary",children:a.affiliationStatus}),a.organizationName?(0,b.jsx)(f.Badge,{variant:"outline",children:a.organizationName}):(0,b.jsx)(f.Badge,{variant:"outline",children:"No org"})]}),(0,b.jsxs)("div",{className:"space-y-space-2xs",children:[(0,b.jsx)("p",{className:"text-label-sm text-muted-foreground",children:"Roles"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-space-2xs",children:Array.from(s).map(a=>(0,b.jsx)(f.Badge,{variant:a.startsWith("portal_")?"outline":"secondary",className:"capitalize",children:a.replace("portal_","").replace("iharc_","")},a))})]}),(0,b.jsxs)("div",{className:"space-y-space-xs rounded-2xl border border-outline/15 bg-surface-container-low p-space-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-space-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-body-sm font-medium text-on-surface",children:"Approve profile"}),(0,b.jsx)("p",{className:"text-label-sm text-muted-foreground",children:"Sets status to approved and refreshes permissions."})]}),(0,b.jsx)(g.Button,{size:"sm",onClick:()=>{r(async()=>{let b=new FormData;b.append("profile_id",a.profileId),b.append("affiliation_status","approved");let c=await l(b);c.success?m({title:"Profile approved",description:"Status set to approved."}):m({title:"Approval failed",description:c.error,variant:"destructive"})})},disabled:q||"approved"===a.affiliationStatus,children:"Approve"})]}),(0,b.jsx)(h.Separator,{}),(0,b.jsx)("div",{className:"flex flex-col gap-space-xs",children:j.map(c=>(0,b.jsx)(n,{label:c.label,checked:s.has(c.value),onChange:b=>{var d;return d=c.value,void r(async()=>{let c=new FormData;c.append("profile_id",a.profileId),c.append("role_name",d),c.append("enable",String(b));let e=await k(c);e.success?m({title:b?"Role granted":"Role removed",description:d}):m({title:"Role update failed",description:e.error,variant:"destructive"})})},disabled:q},c.value))})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-space-sm",children:(0,b.jsx)(g.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,b.jsx)(d.default,{href:`/admin/users/profile/${a.profileId}`,children:"Open full profile"})})})]})]})]})}function n({label:a,checked:c,onChange:d,disabled:e}){return(0,b.jsxs)("label",{className:"flex items-center justify-between gap-space-sm rounded-xl border border-outline/15 bg-surface px-space-sm py-space-2xs text-body-sm text-on-surface",children:[(0,b.jsx)("span",{children:a}),(0,b.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border border-outline",checked:c,onChange:a=>d(a.target.checked),disabled:e})]})}a.s(["UserPeekSheet",()=>m],90662)}];

//# sourceMappingURL=_9dc95cb6._.js.map
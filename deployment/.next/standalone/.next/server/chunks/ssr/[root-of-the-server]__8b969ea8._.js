module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},50645,a=>{a.n(a.i(27572))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},47907,a=>{a.n(a.i(39621))},68023,a=>{a.n(a.i(77290))},35330,a=>{"use strict";var b=a.i(7997),c=a.i(717),d=a.i(39138);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-[var(--md-sys-shape-corner-medium)] border border-outline/12 bg-surface-container-low text-body-md text-on-surface shadow-level-1",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col gap-space-sm p-space-lg pb-space-sm text-on-surface",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-title-lg font-medium leading-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-body-sm text-on-surface-variant",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-space-lg pt-0 text-body-md text-on-surface",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center gap-space-sm p-space-lg pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},96942,59797,a=>{"use strict";var b=a.i(84347);let c=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,d=b.clsx;a.s(["cva",0,(a,b)=>e=>{var f;if((null==b?void 0:b.variants)==null)return d(a,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:g,defaultVariants:h}=b,i=Object.keys(g).map(a=>{let b=null==e?void 0:e[a],d=null==h?void 0:h[a];if(null===b)return null;let f=c(b)||c(d);return g[a][f]}),j=e&&Object.entries(e).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return d(a,i,null==b||null==(f=b.compoundVariants)?void 0:f.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...h,...j}[b]):({...h,...j})[b]===c})?[...a,c,d]:a},[]),null==e?void 0:e.class,null==e?void 0:e.className)}],96942);let e="hover:state-layer-hover focus-visible:state-layer-focus active:state-layer-pressed",f={primary:`state-layer-color-primary ${e}`,"primary-container":`state-layer-color-primary-container ${e}`,secondary:`state-layer-color-secondary ${e}`,"secondary-container":`state-layer-color-secondary-container ${e}`,surface:`state-layer-color-surface ${e}`,"surface-container":`state-layer-color-surface-container ${e}`,inverse:`state-layer-color-inverse-surface ${e}`,error:`state-layer-color-error ${e}`},g={...f,brand:f.primary,"brand-soft":f["primary-container"],supportive:f.secondary,"supportive-container":f["secondary-container"],destructive:f.error,neutral:f.surface,"neutral-container":f["surface-container"]};function h(a){return a?g[a]:""}a.s(["getStateLayerClasses",()=>h],59797)},19637,a=>{"use strict";var b=a.i(7997),c=a.i(96942),d=a.i(39138),e=a.i(59797);let f=(0,c.cva)("inline-flex items-center rounded-[var(--md-sys-shape-corner-extra-small)] border px-2.5 py-0.5 text-label-sm transition-colors motion-duration-short motion-ease-standard focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),g={default:"brand",secondary:"supportive",destructive:"destructive",outline:"neutral"};function h({className:a,variant:c,stateLayerTone:h,...i}){let j=g[c??"default"],k=(0,e.getStateLayerClasses)(h??j);return(0,b.jsx)("div",{className:(0,d.cn)(f({variant:c}),k,a),...i})}a.s(["Badge",()=>h])},31554,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call PendingAffiliationsSection() from the server but PendingAffiliationsSection is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/admin/profiles/pending-affiliations.tsx <module evaluation>","PendingAffiliationsSection");a.s(["PendingAffiliationsSection",0,b])},69572,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call PendingAffiliationsSection() from the server but PendingAffiliationsSection is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/admin/profiles/pending-affiliations.tsx","PendingAffiliationsSection");a.s(["PendingAffiliationsSection",0,b])},18640,a=>{"use strict";a.i(31554);var b=a.i(69572);a.n(b)},609,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call InvitePartnerCard() from the server but InvitePartnerCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/admin/profiles/invite-partner-card.tsx <module evaluation>","InvitePartnerCard");a.s(["InvitePartnerCard",0,b])},69203,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call InvitePartnerCard() from the server but InvitePartnerCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/admin/profiles/invite-partner-card.tsx","InvitePartnerCard");a.s(["InvitePartnerCard",0,b])},69179,a=>{"use strict";a.i(609);var b=a.i(69203);a.n(b)},19942,a=>{"use strict";var b=a.i(7997);a.i(70396);var c=a.i(73727),d=a.i(9919),e=a.i(42145),f=a.i(65108),g=a.i(35330),h=a.i(19637),i=a.i(18640),j=a.i(69179),k=a.i(46592);async function l(){let a=await (0,d.createSupabaseRSCClient)(),g=await (0,f.loadPortalAccess)(a);g||(0,c.redirect)("/login?next=/admin/profiles"),g.canReviewProfiles||(0,c.redirect)((0,k.resolveDefaultWorkspacePath)(g)),await (0,e.ensurePortalProfile)(a,g.userId);let h=a.schema("portal"),l=a.schema("core"),[n,o,p]=await Promise.all([l.from("organizations").select("id, name, organization_type").order("name"),h.from("profiles").select(`
          id,
          display_name,
          position_title,
          affiliation_type,
          affiliation_status,
          affiliation_requested_at,
          organization_id,
          requested_organization_name,
          requested_government_name,
          requested_government_level,
          requested_government_role,
          government_role_type,
        `).eq("affiliation_status","pending").order("affiliation_requested_at",{ascending:!0}).limit(50),h.from("profile_invites").select(`
          id,
          email,
          display_name,
          position_title,
          affiliation_type,
          status,
          created_at
        `).order("created_at",{ascending:!1}).limit(10)]);if(n.error)throw n.error;if(o.error)throw o.error;if(p.error)throw p.error;let q=(n.data??[]).map(a=>({id:String(a.id),name:a.name,governmentLevel:null})),r=o.data??[],s=new Map(q.map(a=>[a.id,a])),t=r.map(a=>{let b=null===a.organization_id?null:String(a.organization_id),c=b?s.get(b):null;return{id:a.id,displayName:a.display_name,positionTitle:a.position_title,affiliationType:a.affiliation_type,affiliationStatus:a.affiliation_status,affiliationRequestedAt:a.affiliation_requested_at,organizationId:c?.id??null,organizationName:c?.name??null,requestedOrganizationName:a.requested_organization_name,requestedGovernmentName:a.requested_government_name,requestedGovernmentLevel:a.requested_government_level,requestedGovernmentRole:a.requested_government_role,governmentRoleType:a.government_role_type}}),u=(p.data??[]).map(a=>({id:a.id,email:a.email??"",displayName:a.display_name,positionTitle:a.position_title,affiliationType:a.affiliation_type,status:a.status,createdAt:a.created_at,organizationName:null})),v=q.filter(a=>!(a.name.toLowerCase().includes("government")||a.name.toLowerCase().includes("county"))),w=q.filter(a=>a.name.toLowerCase().includes("government")||a.name.toLowerCase().includes("county")),x=u.filter(a=>"pending"===a.status).length;return(0,b.jsxs)("div",{className:"page-shell page-stack",children:[(0,b.jsxs)("header",{className:"flex flex-col gap-space-xs",children:[(0,b.jsx)("p",{className:"text-label-sm font-medium uppercase text-muted-foreground",children:"Access & verification"}),(0,b.jsx)("h1",{className:"text-title-lg text-on-surface sm:text-headline-sm",children:"Profile verification & invitations"}),(0,b.jsx)("p",{className:"max-w-3xl text-body-md text-muted-foreground sm:text-body-lg",children:"Approve partner affiliations, refresh organization links, and send invitations so trusted collaborators can reach STEVI in seconds."})]}),(0,b.jsxs)("section",{className:"grid gap-space-md md:grid-cols-3",children:[(0,b.jsx)(m,{title:"Pending verifications",value:t.length.toString(),description:"Awaiting moderator review"}),(0,b.jsx)(m,{title:"Recent invites",value:u.length.toString(),description:"Last 10 invitations sent"}),(0,b.jsx)(m,{title:"Open invites",value:x.toString(),description:"Recipients yet to respond"})]}),(0,b.jsx)(i.PendingAffiliationsSection,{pending:t,communityOrganizations:v,governmentOrganizations:w}),(0,b.jsx)(j.InvitePartnerCard,{organizations:q,recentInvites:u})]})}function m({title:a,value:c,description:d}){return(0,b.jsxs)(g.Card,{className:"border-border/60",children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between gap-space-sm",children:[(0,b.jsx)(g.CardTitle,{className:"text-title-sm",children:a}),(0,b.jsx)(h.Badge,{variant:"outline",className:"text-label-sm",children:c})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)(g.CardDescription,{className:"text-body-sm text-muted-foreground",children:d})})]})}a.s(["default",()=>l,"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8b969ea8._.js.map
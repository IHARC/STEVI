module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},50645,a=>{a.n(a.i(27572))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},47907,a=>{a.n(a.i(39621))},96942,59797,a=>{"use strict";var b=a.i(84347);let c=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,d=b.clsx;a.s(["cva",0,(a,b)=>e=>{var f;if((null==b?void 0:b.variants)==null)return d(a,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:g,defaultVariants:h}=b,i=Object.keys(g).map(a=>{let b=null==e?void 0:e[a],d=null==h?void 0:h[a];if(null===b)return null;let f=c(b)||c(d);return g[a][f]}),j=e&&Object.entries(e).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return d(a,i,null==b||null==(f=b.compoundVariants)?void 0:f.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...h,...j}[b]):({...h,...j})[b]===c})?[...a,c,d]:a},[]),null==e?void 0:e.class,null==e?void 0:e.className)}],96942);let e="hover:state-layer-hover focus-visible:state-layer-focus active:state-layer-pressed",f={primary:`state-layer-color-primary ${e}`,"primary-container":`state-layer-color-primary-container ${e}`,secondary:`state-layer-color-secondary ${e}`,"secondary-container":`state-layer-color-secondary-container ${e}`,surface:`state-layer-color-surface ${e}`,"surface-container":`state-layer-color-surface-container ${e}`,inverse:`state-layer-color-inverse-surface ${e}`,error:`state-layer-color-error ${e}`},g={...f,brand:f.primary,"brand-soft":f["primary-container"],supportive:f.secondary,"supportive-container":f["secondary-container"],destructive:f.error,neutral:f.surface,"neutral-container":f["surface-container"]};function h(a){return a?g[a]:""}a.s(["getStateLayerClasses",()=>h],59797)},38904,63770,a=>{"use strict";let b,c,d;var e=a.i(7997),f=a.i(717);function g(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function h(...a){return b=>{let c=!1,d=a.map(a=>{let d=g(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():g(a[b],null)}}}}a.s(["composeRefs",()=>h],63770);var i=((d=f.forwardRef((a,b)=>{let{children:c,...d}=a;if(f.isValidElement(c)){var e;let a,g,i=(e=c,(g=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(g=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==f.Fragment&&(j.ref=b?h(b,i):i),f.cloneElement(c,j)}return f.Children.count(c)>1?f.Children.only(null):null})).displayName="Slot.SlotClone",b=d,(c=f.forwardRef((a,c)=>{let{children:d,...g}=a,h=f.Children.toArray(d),i=h.find(k);if(i){let a=i.props.children,d=h.map(b=>b!==i?b:f.Children.count(a)>1?f.Children.only(null):f.isValidElement(a)?a.props.children:null);return(0,e.jsx)(b,{...g,ref:c,children:f.isValidElement(a)?f.cloneElement(a,void 0,d):null})}return(0,e.jsx)(b,{...g,ref:c,children:d})})).displayName="Slot.Slot",c),j=Symbol("radix.slottable");function k(a){return f.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===j}var l=a.i(96942),m=a.i(39138),n=a.i(59797);let o=(0,l.cva)("inline-flex items-center justify-center gap-space-xs whitespace-nowrap rounded-[var(--md-sys-shape-corner-extra-small)] text-label-lg transition-colors motion-duration-short motion-ease-standard focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-surface disabled:pointer-events-none disabled:opacity-60 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-level-2 hover:bg-primary/92 focus-visible:ring-primary",destructive:"bg-destructive text-destructive-foreground shadow-level-2 hover:bg-destructive/90 focus-visible:ring-destructive",outline:"border border-outline bg-surface text-on-surface shadow-level-1 hover:bg-surface-container focus-visible:ring-primary",secondary:"bg-secondary-container text-on-secondary-container shadow-level-1 hover:bg-secondary-container/90 focus-visible:ring-secondary",ghost:"text-primary focus-visible:ring-primary",link:"text-primary underline-offset-4 hover:underline focus-visible:ring-transparent"},size:{default:"h-10 px-space-md",sm:"h-8 px-space-sm text-label-md",lg:"h-11 px-space-lg text-label-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p={default:"brand",destructive:"destructive",outline:"neutral",secondary:"supportive-container",ghost:"brand",link:null},q=f.forwardRef(({className:a,variant:b,size:c,stateLayerTone:d,asChild:f=!1,...g},h)=>{let j=p[b??"default"],k=(0,n.getStateLayerClasses)(d??j);return(0,e.jsx)(f?i:"button",{className:(0,m.cn)(o({variant:b,size:c}),k,a),ref:h,...g})});q.displayName="Button",a.s(["Button",()=>q],38904)},19637,a=>{"use strict";var b=a.i(7997),c=a.i(96942),d=a.i(39138),e=a.i(59797);let f=(0,c.cva)("inline-flex items-center rounded-[var(--md-sys-shape-corner-extra-small)] border px-2.5 py-0.5 text-label-sm transition-colors motion-duration-short motion-ease-standard focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),g={default:"brand",secondary:"supportive",destructive:"destructive",outline:"neutral"};function h({className:a,variant:c,stateLayerTone:h,...i}){let j=g[c??"default"],k=(0,e.getStateLayerClasses)(h??j);return(0,b.jsx)("div",{className:(0,d.cn)(f({variant:c}),k,a),...i})}a.s(["Badge",()=>h])},73442,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call CancelAppointmentForm() from the server but CancelAppointmentForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(portal)/appointments/cancel-appointment-form.tsx <module evaluation>","CancelAppointmentForm");a.s(["CancelAppointmentForm",0,b])},94501,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call CancelAppointmentForm() from the server but CancelAppointmentForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(portal)/appointments/cancel-appointment-form.tsx","CancelAppointmentForm");a.s(["CancelAppointmentForm",0,b])},16974,a=>{"use strict";a.i(73442);var b=a.i(94501);a.n(b)},76838,a=>{a.n(a.i(92957))},77857,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ClientPreviewGuard() from the server but ClientPreviewGuard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/layout/client-preview-guard.tsx <module evaluation>","ClientPreviewGuard");a.s(["ClientPreviewGuard",0,b])},21391,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ClientPreviewGuard() from the server but ClientPreviewGuard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/layout/client-preview-guard.tsx","ClientPreviewGuard");a.s(["ClientPreviewGuard",0,b])},74501,a=>{"use strict";a.i(77857);var b=a.i(21391);a.n(b)},6537,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call RequestRescheduleForm() from the server but RequestRescheduleForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(portal)/appointments/request-reschedule-form.tsx <module evaluation>","RequestRescheduleForm");a.s(["RequestRescheduleForm",0,b])},24110,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call RequestRescheduleForm() from the server but RequestRescheduleForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(portal)/appointments/request-reschedule-form.tsx","RequestRescheduleForm");a.s(["RequestRescheduleForm",0,b])},30625,a=>{"use strict";a.i(6537);var b=a.i(24110);a.n(b)},39014,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call RequestAppointmentForm() from the server but RequestAppointmentForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(portal)/appointments/request-appointment-form.tsx <module evaluation>","RequestAppointmentForm");a.s(["RequestAppointmentForm",0,b])},68726,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call RequestAppointmentForm() from the server but RequestAppointmentForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(portal)/appointments/request-appointment-form.tsx","RequestAppointmentForm");a.s(["RequestAppointmentForm",0,b])},9481,a=>{"use strict";a.i(39014);var b=a.i(68726);a.n(b)},19844,a=>{"use strict";var b=a.i(7997);a.i(70396);var c=a.i(73727),d=a.i(9919),e=a.i(42145),f=a.i(35330),g=a.i(19637),h=a.i(38904),i=a.i(9481),j=a.i(74501),k=a.i(30625),l=a.i(16974),m=a.i(47280),n=a.i(30475);let o=new Intl.DateTimeFormat("en-CA",{dateStyle:"full",timeStyle:"short"});function p(a){return a.occurs_at??a.created_at??a.updated_at??a.requested_window??""}async function q(){let a=await (0,d.createSupabaseRSCClient)(),{data:{user:q}}=await a.auth.getUser();q||(0,c.redirect)("/login?next=/appointments");let r=await (0,e.ensurePortalProfile)(a,q.id),{upcoming:s,past:t}=await (0,m.fetchClientAppointments)(a,r.id),u=[...s,...t].sort((a,b)=>{let c,d;return c=new Date(p(a)).getTime(),d=new Date(p(b)).getTime(),Number.isNaN(c)&&Number.isNaN(d)?0:Number.isNaN(c)?1:Number.isNaN(d)?-1:c-d}),v=u.length>0;return(0,b.jsxs)("div",{className:"page-shell page-stack",children:[(0,b.jsxs)("header",{className:"flex flex-col gap-space-xs",children:[(0,b.jsx)("p",{className:"text-label-sm font-medium uppercase text-muted-foreground",children:"Appointment support"}),(0,b.jsx)("h1",{className:"text-headline-lg text-on-surface sm:text-display-sm",children:"Manage your outreach appointments"}),(0,b.jsx)("p",{className:"max-w-2xl text-body-md text-muted-foreground sm:text-body-lg",children:"Request meetings, see upcoming visits, and review past appointments linked with your STEVI plan."})]}),(0,b.jsx)("section",{"aria-labelledby":"appointments-timeline",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{className:"flex flex-col gap-space-sm sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(f.CardTitle,{id:"appointments-timeline",className:"text-title-lg",children:"Appointments timeline"}),(0,b.jsx)("p",{className:"text-body-sm text-muted-foreground",children:"All upcoming and past appointments in one place. We respond to new requests within one business day."})]}),(0,b.jsx)(h.Button,{variant:"outline",asChild:!0,className:"text-label-md font-medium",children:(0,b.jsx)("a",{href:"#request-form",children:"Request change"})})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-space-md",children:[v?(0,b.jsx)("ol",{className:"space-y-space-sm",children:u.map(a=>{var c,d;let e=function(a){try{return a?o.format(new Date(a)):"Not scheduled yet"}catch{return a}}(a.occurs_at),f=function(a){switch(a){case"requested":case"pending_confirmation":case"reschedule_requested":return"Needs confirmation";case"scheduled":return"Scheduled";case"completed":return"Completed";case"no_show":return"Missed";case"cancelled_by_client":case"cancelled_by_staff":return"Cancelled";default:return String(a).replaceAll("_"," ")}}(a.status),h="completed"===(c=a.status)?"secondary":"cancelled_by_client"===c||"cancelled_by_staff"===c?"outline":"no_show"===c?"destructive":"default",i="completed"!==a.status&&"cancelled_by_client"!==a.status&&"cancelled_by_staff"!==a.status&&"no_show"!==a.status;return(0,b.jsxs)("li",{className:"rounded-xl border border-outline/20 bg-surface-container-low p-space-md shadow-level-1","aria-labelledby":`appt-${a.id}`,children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-space-sm",children:[(0,b.jsxs)("div",{className:"space-y-space-2xs",children:[(0,b.jsx)("p",{className:"text-label-sm text-muted-foreground",children:e}),(0,b.jsx)("h2",{id:`appt-${a.id}`,className:"text-title-md font-medium text-on-surface",children:a.title}),(0,b.jsxs)("p",{className:"text-body-sm text-on-surface/80",children:["With ",a.staff?.display_name??"outreach team"]}),(0,b.jsxs)("p",{className:"text-body-sm text-muted-foreground",children:[a.location??"To be confirmed"," Â· ",(d=a.location_type)?d.replaceAll("_"," "):"unspecified"]}),a.meeting_url?(0,b.jsx)("p",{className:"text-body-sm",children:(0,b.jsx)("a",{className:"text-primary underline-offset-4 hover:underline",href:a.meeting_url,target:"_blank",rel:"noreferrer",children:"Join meeting link"})}):null,a.requested_window?(0,b.jsxs)("p",{className:"text-label-sm text-muted-foreground",children:["Requested window: ",a.requested_window]}):null,a.outcome_notes?(0,b.jsxs)("p",{className:"text-body-sm text-on-surface/80",children:["Outcome: ",a.outcome_notes]}):null]}),(0,b.jsx)(g.Badge,{variant:h,className:"capitalize",children:f})]}),i?(0,b.jsx)(j.ClientPreviewGuard,{message:"Requests are disabled while in preview mode.",children:(0,b.jsxs)("div",{className:"mt-space-sm flex flex-wrap gap-space-sm",children:[(0,b.jsx)(k.RequestRescheduleForm,{action:n.requestRescheduleAsClient,appointmentId:a.id}),(0,b.jsx)(l.CancelAppointmentForm,{action:n.cancelAppointmentAsClient,appointmentId:a.id,variant:"secondary"})]})}):null]},a.id)})}):(0,b.jsxs)("div",{className:"rounded-xl border border-dashed border-outline/30 bg-surface-container-low p-space-md text-body-sm text-muted-foreground",children:[(0,b.jsx)("p",{className:"font-medium text-on-surface",children:"No appointments yet"}),(0,b.jsx)("p",{className:"mt-space-2xs",children:"Send us your availability and preferred contact method. The outreach coordinator will confirm and add the visit here."}),(0,b.jsx)("p",{className:"mt-space-2xs text-label-sm",children:"We aim to respond within one business day and log updates for your record."}),(0,b.jsxs)("div",{className:"mt-space-sm flex flex-wrap gap-space-sm",children:[(0,b.jsx)(h.Button,{asChild:!0,size:"sm",children:(0,b.jsx)("a",{href:"#request-form",children:"Request an appointment"})}),(0,b.jsx)(h.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,b.jsx)("a",{href:"/support",children:"Message support"})})]})]}),(0,b.jsxs)("p",{className:"text-body-sm text-muted-foreground",children:["If plans change on the day-of, call the coordination desk at ",(0,b.jsx)("a",{href:"tel:289-555-0100",className:"text-primary underline-offset-4 hover:underline",children:"289-555-0100"}),". We keep this log synced with STEVI Ops so staff stay aligned."]})]})]})}),(0,b.jsx)("section",{"aria-labelledby":"request-heading",id:"request-form",children:(0,b.jsx)(j.ClientPreviewGuard,{message:"Requests are disabled while you preview the client portal. Exit preview to submit.",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{id:"request-heading",className:"text-title-lg",children:"Request a new appointment"}),(0,b.jsx)("p",{className:"text-body-sm text-muted-foreground",children:"Tell us what you need. The outreach coordinator will respond using your preferred contact method."})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)(i.RequestAppointmentForm,{action:n.requestAppointmentAction,profileDisplayName:r.display_name})})]})})})]})}a.s(["default",()=>q,"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__15908302._.js.map
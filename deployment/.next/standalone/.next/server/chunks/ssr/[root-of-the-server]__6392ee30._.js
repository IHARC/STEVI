module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},50645,a=>{a.n(a.i(27572))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},47907,a=>{a.n(a.i(39621))},68023,a=>{a.n(a.i(77290))},19637,a=>{"use strict";var b=a.i(7997),c=a.i(96942),d=a.i(39138),e=a.i(59797);let f=(0,c.cva)("inline-flex items-center rounded-[var(--md-sys-shape-corner-extra-small)] border px-2.5 py-0.5 text-label-sm transition-colors motion-duration-short motion-ease-standard focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),g={default:"brand",secondary:"supportive",destructive:"destructive",outline:"neutral"};function h({className:a,variant:c,stateLayerTone:h,...i}){let j=g[c??"default"],k=(0,e.getStateLayerClasses)(h??j);return(0,b.jsx)("div",{className:(0,d.cn)(f({variant:c}),k,a),...i})}a.s(["Badge",()=>h])},35330,a=>{"use strict";var b=a.i(7997),c=a.i(717),d=a.i(39138);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-[var(--md-sys-shape-corner-medium)] border border-outline/12 bg-surface-container-low text-body-md text-on-surface shadow-level-1",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col gap-space-sm p-space-lg pb-space-sm text-on-surface",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-title-lg font-medium leading-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-body-sm text-on-surface-variant",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-space-lg pt-0 text-body-md text-on-surface",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center gap-space-sm p-space-lg pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},96942,59797,a=>{"use strict";var b=a.i(84347);let c=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,d=b.clsx;a.s(["cva",0,(a,b)=>e=>{var f;if((null==b?void 0:b.variants)==null)return d(a,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:g,defaultVariants:h}=b,i=Object.keys(g).map(a=>{let b=null==e?void 0:e[a],d=null==h?void 0:h[a];if(null===b)return null;let f=c(b)||c(d);return g[a][f]}),j=e&&Object.entries(e).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return d(a,i,null==b||null==(f=b.compoundVariants)?void 0:f.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...h,...j}[b]):({...h,...j})[b]===c})?[...a,c,d]:a},[]),null==e?void 0:e.class,null==e?void 0:e.className)}],96942);let e="hover:state-layer-hover focus-visible:state-layer-focus active:state-layer-pressed",f={primary:`state-layer-color-primary ${e}`,"primary-container":`state-layer-color-primary-container ${e}`,secondary:`state-layer-color-secondary ${e}`,"secondary-container":`state-layer-color-secondary-container ${e}`,surface:`state-layer-color-surface ${e}`,"surface-container":`state-layer-color-surface-container ${e}`,inverse:`state-layer-color-inverse-surface ${e}`,error:`state-layer-color-error ${e}`},g={...f,brand:f.primary,"brand-soft":f["primary-container"],supportive:f.secondary,"supportive-container":f["secondary-container"],destructive:f.error,neutral:f.surface,"neutral-container":f["surface-container"]};function h(a){return a?g[a]:""}a.s(["getStateLayerClasses",()=>h],59797)},38904,63770,a=>{"use strict";let b,c,d;var e=a.i(7997),f=a.i(717);function g(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function h(...a){return b=>{let c=!1,d=a.map(a=>{let d=g(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():g(a[b],null)}}}}a.s(["composeRefs",()=>h],63770);var i=((d=f.forwardRef((a,b)=>{let{children:c,...d}=a;if(f.isValidElement(c)){var e;let a,g,i=(e=c,(g=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(g=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==f.Fragment&&(j.ref=b?h(b,i):i),f.cloneElement(c,j)}return f.Children.count(c)>1?f.Children.only(null):null})).displayName="Slot.SlotClone",b=d,(c=f.forwardRef((a,c)=>{let{children:d,...g}=a,h=f.Children.toArray(d),i=h.find(k);if(i){let a=i.props.children,d=h.map(b=>b!==i?b:f.Children.count(a)>1?f.Children.only(null):f.isValidElement(a)?a.props.children:null);return(0,e.jsx)(b,{...g,ref:c,children:f.isValidElement(a)?f.cloneElement(a,void 0,d):null})}return(0,e.jsx)(b,{...g,ref:c,children:d})})).displayName="Slot.Slot",c),j=Symbol("radix.slottable");function k(a){return f.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===j}var l=a.i(96942),m=a.i(39138),n=a.i(59797);let o=(0,l.cva)("inline-flex items-center justify-center gap-space-xs whitespace-nowrap rounded-[var(--md-sys-shape-corner-extra-small)] text-label-lg transition-colors motion-duration-short motion-ease-standard focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-surface disabled:pointer-events-none disabled:opacity-60 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-level-2 hover:bg-primary/92 focus-visible:ring-primary",destructive:"bg-destructive text-destructive-foreground shadow-level-2 hover:bg-destructive/90 focus-visible:ring-destructive",outline:"border border-outline bg-surface text-on-surface shadow-level-1 hover:bg-surface-container focus-visible:ring-primary",secondary:"bg-secondary-container text-on-secondary-container shadow-level-1 hover:bg-secondary-container/90 focus-visible:ring-secondary",ghost:"text-primary focus-visible:ring-primary",link:"text-primary underline-offset-4 hover:underline focus-visible:ring-transparent"},size:{default:"h-10 px-space-md",sm:"h-8 px-space-sm text-label-md",lg:"h-11 px-space-lg text-label-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p={default:"brand",destructive:"destructive",outline:"neutral",secondary:"supportive-container",ghost:"brand",link:null},q=f.forwardRef(({className:a,variant:b,size:c,stateLayerTone:d,asChild:f=!1,...g},h)=>{let j=p[b??"default"],k=(0,n.getStateLayerClasses)(d??j);return(0,e.jsx)(f?i:"button",{className:(0,m.cn)(o({variant:b,size:c}),k,a),ref:h,...g})});q.displayName="Button",a.s(["Button",()=>q],38904)},22359,a=>{"use strict";var b=a.i(7997),c=a.i(717),d=a.i(39138);let e={indicator:"var(--md-sys-spacing-xs)",control:"calc(var(--md-sys-spacing-sm) - (var(--md-sys-spacing-2xs)/2))",xs:"var(--md-sys-size-icon-xs)",sm:"var(--md-sys-size-icon-sm)",md:"var(--md-sys-size-icon-md)",lg:"var(--md-sys-size-icon-lg)"},f=c.forwardRef(({icon:a,className:c,size:f="md",strokeWidth:g=1.5,decorative:h=!0,style:i,...j},k)=>{let l=e[f]??e.md;return(0,b.jsx)(a,{ref:k,"aria-hidden":!!h||void 0,role:h?void 0:"img",focusable:"false",className:(0,d.cn)("shrink-0 text-inherit",c),style:{width:l,height:l,...i},strokeWidth:g,...j})});f.displayName="Icon",a.s(["Icon",0,f])},65951,a=>{"use strict";var b=a.i(7997),c=a.i(95936),d=a.i(38904),e=a.i(22359),f=a.i(39138);function g({eyebrow:a,title:g,description:h,primaryAction:i,secondaryAction:j,align:k="start",children:l}){return(0,b.jsxs)("header",{className:(0,f.cn)("flex flex-wrap gap-space-md border-b border-outline/12 pb-space-md pt-space-sm","center"===k?"items-center justify-center text-center":"items-start justify-between text-left"),children:[(0,b.jsxs)("div",{className:(0,f.cn)("space-y-space-2xs","center"===k?"max-w-3xl":"max-w-4xl"),children:[a?(0,b.jsx)("p",{className:"text-label-sm font-medium text-on-surface-variant",children:a}):null,(0,b.jsx)("h1",{className:"text-headline-sm text-on-surface sm:text-headline-md",children:g}),h?(0,b.jsx)("div",{className:"text-body-md text-on-surface-variant sm:text-body-lg",children:h}):null,l]}),i||j?(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-space-xs",children:[i?(0,b.jsx)(d.Button,{asChild:!0,children:(0,b.jsxs)(c.default,{href:i.href,"aria-label":i.ariaLabel??i.label,children:[i.icon?(0,b.jsx)(e.Icon,{icon:i.icon,size:"sm",className:"mr-space-2xs"}):null,i.label]})}):null,j?(0,b.jsx)(d.Button,{asChild:!0,variant:"secondary",children:(0,b.jsxs)(c.default,{href:j.href,"aria-label":j.ariaLabel??j.label,children:[j.icon?(0,b.jsx)(e.Icon,{icon:j.icon,size:"sm",className:"mr-space-2xs"}):null,j.label]})}):null]}):null]})}a.s(["WorkspacePageHeader",()=>g])},95374,a=>{"use strict";var b=a.i(7997),c=a.i(22359),d=a.i(39138);let e={default:"border-outline/12 bg-surface-container-low text-on-surface",warning:"border-primary/20 bg-primary-container text-on-primary-container",info:"border-outline/12 bg-secondary-container text-on-secondary-container"};function f({label:a,value:f,tone:g="default",icon:h,footnote:i}){return(0,b.jsxs)("div",{className:(0,d.cn)("flex flex-col gap-space-2xs rounded-[var(--md-sys-shape-corner-medium)] border px-space-md py-space-md shadow-level-1",e[g]),children:[(0,b.jsxs)("div",{className:"flex items-center gap-space-2xs text-label-md text-on-surface-variant",children:[h?(0,b.jsx)(c.Icon,{icon:h,size:"sm",className:"text-inherit"}):null,(0,b.jsx)("span",{children:a})]}),(0,b.jsx)("p",{className:"text-headline-sm font-semibold sm:text-headline-md",children:f}),i?(0,b.jsx)("p",{className:"text-label-sm text-on-surface-variant",children:i}):null]})}a.s(["StatTile",()=>f])},34825,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call NotificationsChart() from the server but NotificationsChart is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(portal)/admin/notifications-chart.tsx <module evaluation>","NotificationsChart");a.s(["NotificationsChart",0,b])},28005,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call NotificationsChart() from the server but NotificationsChart is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(portal)/admin/notifications-chart.tsx","NotificationsChart");a.s(["NotificationsChart",0,b])},47694,a=>{"use strict";a.i(34825);var b=a.i(28005);a.n(b)},40685,a=>{"use strict";var b=a.i(7997),c=a.i(95936);a.i(70396);var d=a.i(73727),e=a.i(9919),f=a.i(42145),g=a.i(65108),h=a.i(35330),i=a.i(38904),j=a.i(19637),k=a.i(46592),l=a.i(47694),m=a.i(65951),n=a.i(95374),o=a.i(39138);function p(a){return a.toLocaleString("en-CA")}async function q(){let a=await (0,e.createSupabaseRSCClient)(),c=await (0,g.loadPortalAccess)(a);c||(0,d.redirect)("/login?next=/admin/operations"),c.canAccessAdminWorkspace||(0,d.redirect)((0,k.resolveDefaultWorkspacePath)(c)),await (0,f.ensurePortalProfile)(a,c.userId);let i=a.schema("portal"),o=a.schema("case_mgmt"),[q,t,u,v,w,x,y]=await Promise.all([i.from("profiles").select("id",{count:"exact",head:!0}).eq("affiliation_status","pending"),i.from("profile_invites").select("id",{count:"exact",head:!0}).eq("status","pending"),i.from("notifications").select("id",{count:"exact",head:!0}).gte("created_at",s()),o.from("case_management").select("id",{count:"exact",head:!0}).not("status","eq","closed"),i.from("resource_pages").select("id",{count:"exact",head:!0}).eq("is_published",!0),i.from("policies").select("id",{count:"exact",head:!0}).eq("status","published"),i.from("notifications").select("id, created_at").gte("created_at",s()).order("created_at")]),z={pendingProfiles:q.count??0,pendingInvites:t.count??0,notifications7d:u.count??0,openCases:v.count??0,resourcesPublished:w.count??0,policiesPublished:x.count??0},A=[{id:"pending-profiles",label:"Pending approvals",value:p(z.pendingProfiles),tone:z.pendingProfiles>0?"warning":"default"},{id:"pending-invites",label:"Open invites",value:p(z.pendingInvites)},{id:"open-cases",label:"Open cases",value:p(z.openCases)},{id:"notifications",label:"Notifications (7d)",value:p(z.notifications7d)},{id:"resources",label:"Published resources",value:p(z.resourcesPublished)},{id:"policies",label:"Published policies",value:p(z.policiesPublished)}],B=(y.data??[]).map(a=>({day:new Date(a.created_at).toLocaleDateString("en-CA",{weekday:"short"}),count:1})),C=Array.from(new Set(B.map(a=>a.day))).map(a=>({name:a,value:B.filter(b=>b.day===a).length}));return(0,b.jsxs)("div",{className:"page-shell page-stack",children:[(0,b.jsx)(m.WorkspacePageHeader,{eyebrow:"Admin workspace",title:"Operations overview",description:"Monitor approvals, notifications, and content at a glance. All counts respect Supabase RLS and audit logging.",primaryAction:{label:"Review approvals",href:"/admin/profiles"},secondaryAction:{label:"Send notification",href:"/admin/notifications"}}),(0,b.jsx)("section",{className:"grid gap-space-md sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:A.map(a=>(0,b.jsx)(n.StatTile,{label:a.label,value:a.value,tone:a.tone},a.id))}),(0,b.jsxs)("section",{className:"grid gap-space-md lg:grid-cols-[1.8fr,1.2fr]",children:[(0,b.jsxs)(h.Card,{className:"h-full",children:[(0,b.jsxs)(h.CardHeader,{className:"flex items-start justify-between gap-space-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.CardTitle,{className:"text-title-lg",children:"Notifications (7 days)"}),(0,b.jsx)(h.CardDescription,{children:"Sent and queued notifications grouped by day."})]}),(0,b.jsxs)(j.Badge,{variant:"outline",children:[p(z.notifications7d)," total"]})]}),(0,b.jsx)(h.CardContent,{children:0===C.length?(0,b.jsx)("p",{className:"text-body-sm text-muted-foreground",children:"No notifications sent in the last week."}):(0,b.jsx)(l.NotificationsChart,{data:C})})]}),(0,b.jsxs)(h.Card,{className:"h-full",children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{className:"text-title-lg",children:"Attention queue"}),(0,b.jsx)(h.CardDescription,{children:"Work the highest-risk items first."})]}),(0,b.jsxs)(h.CardContent,{className:"space-y-space-xs",children:[(0,b.jsx)(r,{label:"Pending profile approvals",count:z.pendingProfiles,href:"/admin/profiles",tone:z.pendingProfiles>0?"warning":"default"}),(0,b.jsx)(r,{label:"Pending org invites",count:z.pendingInvites,href:"/admin/profiles"}),(0,b.jsx)(r,{label:"Open cases",count:z.openCases,href:"/admin/appointments"}),(0,b.jsx)(r,{label:"Content to review",count:z.resourcesPublished+z.policiesPublished,href:"/admin/resources"})]})]})]})]})}function r({label:a,count:d,href:e,tone:f="default"}){return(0,b.jsxs)("div",{className:"flex items-center justify-between gap-space-sm rounded-[var(--md-sys-shape-corner-small)] px-space-sm py-space-sm transition-colors state-layer-color-neutral hover:bg-surface-container",children:[(0,b.jsxs)("div",{className:"space-y-space-3xs",children:[(0,b.jsx)("p",{className:"text-body-md font-medium text-on-surface",children:a}),(0,b.jsx)("p",{className:"text-label-sm text-on-surface-variant",children:"RLS enforced in destination workspace."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-space-sm",children:[(0,b.jsx)(j.Badge,{variant:"warning"===f?"secondary":"outline",className:(0,o.cn)("warning"===f?"border-primary/20 bg-primary-container text-on-primary-container":"border-outline/30 text-on-surface-variant"),children:p(d)}),(0,b.jsx)(i.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,b.jsx)(c.default,{href:e,children:"Open"})})]})]})}function s(){let a=new Date;return a.setDate(a.getDate()-7),a.toISOString()}a.s(["default",()=>q,"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6392ee30._.js.map